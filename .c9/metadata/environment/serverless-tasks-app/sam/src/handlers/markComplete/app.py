{"filter":false,"title":"app.py","tooltip":"/serverless-tasks-app/sam/src/handlers/markComplete/app.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":37,"column":0},"action":"insert","lines":["def lambda_handler(event, context):","","    user = event['requestContext']['authorizer']['principalId'] ","    task_id = event['pathParameters']['id']","","    # Create the item key","    ddb_key={","            'user': f\"user#{user}\",","            'id': f\"task#{task_id}\"","        }","","    # Update the taskStatus field","    response = table.update_item(","        Key=ddb_key,","        UpdateExpression=\"set taskStatus = :taskStatus\",","        ConditionExpression='attribute_exists(id)',","        ExpressionAttributeValues={","            ':taskStatus': 'Completed'","        },","        ReturnValues=\"UPDATED_NEW\"","    )","","    # Fetch the updated item from the response","    item=response['Attributes']","","    print('Success - item updated')","","    response = {","        'statusCode': 200,","        'headers': {","            'Access-Control-Allow-Origin': '*'","        },","        'body': json.dumps(item)","    }","    ","    return response","",""],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":4,"column":0},"end":{"row":4,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1716990070738,"hash":"4f4dd7ceae99429fcac39169c7cd9f21ad8be6d6"}